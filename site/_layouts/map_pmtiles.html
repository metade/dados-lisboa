---
layout: nil
---

<!doctype html>
<html lang="pt">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{{ page.title }} | {{ site.title }}</title>
        <link
            rel="stylesheet"
            href="{{ '/assets/css/util.css' | relative_url }}"
        />
        <link
            rel="stylesheet"
            href="{{ '/assets/css/site.css' | relative_url }}"
        />
        <link
            href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css"
            rel="stylesheet"
        />
    </head>
    <body>
        <div id="map" class="map-full"></div>
        <script
            type="module"
            src="{{ '/assets/js/core.js' | relative_url }}"
        ></script>
        <script src="https://unpkg.com/pmtiles@latest/dist/pmtiles.js"></script>
        <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
        <script type="module">
            import { initPMTilesMap } from "{{ '/assets/js/map.js' | relative_url }}";
            import { paletteGreens } from "{{ '/assets/js/parques.js' | relative_url }}";

            const pmtilesPath = "{{ page.pmtiles_path | relative_url }}";
            const layerName = "{{ page.layer_name }}";
            initPMTilesMap({
                container: "map",
                pmtilesURL: pmtilesPath,
                sourceLayer: layerName,
                center: [-9.1427, 38.7369],
                zoom: 12,
                paint: {
                    "fill-color": [
                        "interpolate",
                        ["linear"],
                        ["get", "dist_m"],
                        0,
                        paletteGreens[5],
                        200,
                        paletteGreens[4],
                        500,
                        paletteGreens[3],
                        1000,
                        paletteGreens[2],
                        2000,
                        paletteGreens[1],
                    ],
                    "fill-opacity": 0.75,
                    "fill-outline-color": "#2e2e2e",
                },
                basemapPMTilesURL:
                    "{{ page.basemap_pmtiles | default: '/assets/data/processed/basemap.pmtiles' | relative_url }}",
            });
        </script>

        <script src="https://unpkg.com/pmtiles@latest/dist/pmtiles.js"></script>
        <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
        <script type="module">
            import { initMap } from "{{ '/assets/js/map.js' | relative_url }}";
            import { paletteGreens } from "{{ '/assets/js/parques.js' | relative_url }}";

            const thematicPath = "{{ page.pmtiles_path | relative_url }}";
            const layerName    = "{{ page.layer_name }}";

            const basemap = {
              mode: "{{ site.basemap.mode | default: 'carto_raster' }}",
              pmtilesPath: "{{ site.basemap.pmtiles_path | default: '/assets/data/processed/basemap.pmtiles' | relative_url }}",
              carto: {
                rasterSubdomains: {{ site.basemap.carto.raster_subdomains | jsonify }},
                rasterPath: "{{ site.basemap.carto.raster_path }}",
                vectorStyleURL: "{{ site.basemap.carto.vector_style_url }}",
                attribution: "{{ site.basemap.carto.attr }}"
              }
            };

            initMap({
              container: 'map',
              thematicPMTilesURL: thematicPath,
              sourceLayer: layerName,
              center: [-9.1427, 38.7369],
              zoom: 12,
              paint: {
                'fill-color': ['interpolate', ['linear'], ['get','dist_m'],
                  0, paletteGreens[5],
                  200, paletteGreens[4],
                  500, paletteGreens[3],
                  1000, paletteGreens[2],
                  2000, paletteGreens[1]
                ],
                'fill-opacity': 0.75,
                'fill-outline-color': '#2e2e2e'
              },
              basemap
            });
        </script>
    </body>
</html>
