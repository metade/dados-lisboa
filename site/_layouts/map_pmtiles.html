---
layout: default
---
<div class="map-frame full-bleed">
  <div id="map" class="map-full"></div>
</div>

<script src="https://unpkg.com/pmtiles@latest/dist/pmtiles.js"></script>
<script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
<script type="module">
  import { initPMTilesMap } from "{{ '/assets/js/map.js' | relative_url }}";
  import { paletteGreens } from "{{ '/assets/js/parques.js' | relative_url }}";

  const pmtilesPath = "{{ page.pmtiles_path | relative_url }}";
  const layerName   = "{{ page.layer_name }}";
  initPMTilesMap({
    container: 'map',
    pmtilesURL: pmtilesPath,
    sourceLayer: layerName,
    center: [-9.1427, 38.7369],
    zoom: 12,
    paint: {
      'fill-color': ['interpolate', ['linear'], ['get','dist_m'],
        0, paletteGreens[5],
        200, paletteGreens[4],
        500, paletteGreens[3],
        1000, paletteGreens[2],
        2000, paletteGreens[1]
      ],
      'fill-opacity': 0.75,
      'fill-outline-color': '#2e2e2e'
    },
    basemapPMTilesURL: "{{ page.basemap_pmtiles | default: '/assets/data/processed/basemap.pmtiles' | relative_url }}"
  });
</script>
